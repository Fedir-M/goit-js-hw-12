{"version":3,"file":"commonHelpers.js","sources":["../src/js/scrollTop.js","../src/js/fetchImages.js","../src/js/markupGallery.js","../src/main.js"],"sourcesContent":["export function scrollToTop(element) {\n  const cardEl = element.firstElementChild;\n  const rect = cardEl.getBoundingClientRect().height * 2;\n\n  window.scrollBy({\n    top: rect,\n    behavior: 'smooth',\n  });\n}\n","import axios from 'axios';\n\nconst baseURL = 'https://pixabay.com/api/'\nconst KEY_API = '42031506-26545a7af84e6a92777e1df63';\n\nexport async function fetchImages(keywords, page, perPage) {\n    const params = new URLSearchParams({\n        key: KEY_API,\n        q: keywords,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        page,\n        per_page: perPage\n      });\n\n      const {data} = await axios.get(`${baseURL}?${params}`)\n\n      return data\n}","export function galleryMarkup(data) {\n  return data.map(\n    ({\n      webformatURL,\n      largeImageURL,\n      tags,\n      likes,\n      views,\n      comments,\n      downloads,\n    }) =>\n      `<a class=\"gallery__card\" href=\"${largeImageURL}\">\n            <img class=\"gallery__img\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n\n            <ul class=\"card__text--list\">\n                    <li class=\"card__text--item\">\n                        <h2 class=\"card__item--title\">Likes</h2>\n                        <p class=\"card__item--value\">${likes}</p>\n                    </li>\n\n                    <li class=\"card__text--item\">\n                        <h2 class=\"card__item--title\">Views</h2>\n                        <p class=\"card__item--value\">${views}</p>\n                    </li>\n\n                    <li class=\"card__text--item\">\n                        <h2 class=\"card__item--title\">Comments</h2>\n                        <p class=\"card__item--value\">${comments}</p>\n                    </li>\n\n                    <li class=\"card__text--item\">\n                        <h2 class=\"card__item--title\">Downloads</h2>\n                        <p class=\"card__item--value\">${downloads}</p>\n                    </li>\n            </ul>\n        </a> \n      `\n  );\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { scrollToTop } from './js/scrollTop.js';\n\nimport { fetchImages } from './js/fetchImages.js';\nimport { galleryMarkup } from './js/markupGallery.js';\n\nconst refs = {\n  formEl: document.querySelector('.input__form'),\n  loader: document.querySelector('.loader'),\n  loading: document.querySelector('.text__loading'),\n  gallery: document.querySelector('.gallery'),\n  loadMoreBtn: document.querySelector('.loadMoreBtn'),\n};\n\nlet simplelightboxGallery = null; // N!!! - it could make an issue in the future code(ex: in React) if I use <<let simplelightboxGallery;>>\nlet page = 1;\nlet perPage = 40;\nlet query = '';\n\nrefs.formEl.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\n\nasync function onSearch(evt) {\n  evt.preventDefault();\n\n  query = evt.currentTarget.elements.query.value.trim();\n  page = 1;\n\n  if (query !== '') {\n    onLoaderVisible();\n  }\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    if (data.totalHits === 0) {\n      refs.gallery.innerHTML = '';\n      iziToast.error({\n        title: 'Sorry,',\n        message:\n          'there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        progressBarColor: 'white',\n      });\n      onLoaderUnVisible();\n      refs.formEl.reset();\n    } else {\n      onLoaderUnVisible();\n\n      const galleryData = data.hits;\n\n      console.log(data);\n\n      const galleryItems = galleryMarkup(galleryData).join('');\n\n      refs.gallery.innerHTML = '';\n      refs.gallery.insertAdjacentHTML('beforeend', galleryItems);\n\n      refs.loadMoreBtn.classList.remove('isHidden');\n\n      simplelightboxGallery = new SimpleLightbox('.gallery a').refresh();\n\n      refs.formEl.reset();\n    }\n  } catch (error) {\n    console.log(error);\n  }\n}\n\nasync function onLoadMore() {\n  page += 1;\n\n  onLoaderVisible();\n\n  refs.loadMoreBtn.classList.add('isHidden');\n\n  try {\n    const data = await fetchImages(query, page, perPage);\n\n    const totalPages = Math.ceil(data.totalHits / perPage);\n\n      onLoaderUnVisible();\n\n      const galleryData = data.hits;\n\n      const galleryItems = galleryMarkup(galleryData).join('');\n\n      refs.gallery.insertAdjacentHTML('beforeend', galleryItems);\n\n      refs.loadMoreBtn.classList.remove('isHidden');\n\n      scrollToTop(refs.gallery);\n\n      simplelightboxGallery = new SimpleLightbox('.gallery a').refresh();\n\n      if (page >= totalPages) {\n        iziToast.error({\n          title: 'Sorry,',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n          progressBarColor: 'white',\n        });\n        refs.loadMoreBtn.classList.add('isHidden');\n        onLoaderUnVisible();\n      } \n    \n  } catch (error) {\n    console.log(error);\n  }\n}\n\nfunction onLoaderVisible() {\n  refs.loader.classList.remove('isHidden');\n  refs.loading.classList.remove('isHidden');\n}\n\nfunction onLoaderUnVisible() {\n  refs.loader.classList.add('isHidden');\n  refs.loading.classList.add('isHidden');\n}\n\n"],"names":["scrollToTop","element","rect","baseURL","KEY_API","fetchImages","keywords","page","perPage","params","data","axios","galleryMarkup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","refs","simplelightboxGallery","query","onSearch","onLoadMore","evt","onLoaderVisible","iziToast","onLoaderUnVisible","galleryData","galleryItems","SimpleLightbox","error","totalPages"],"mappings":"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"}